# PostgreSQL Index Benchmark Report

Generated at: 2026-02-14T18:29:11.163Z
Database URL: `postgresql://prisma:prisma@localhost:5432/prisma?connection_limit=1`

## Setup

- dataset sizes: 20000, 100000
- warmups: 3
- measured runs: 15
- create batch size: 1000

## Scenario Definitions

- `baseline`: id(primary key) のみ
- `selective_indexes`: 選択性が高い列だけ index
- `over_indexed`: 低選択性や用途不明の列にも追加

## Dataset: 20,000 rows

| Metric | baseline | selective_indexes | over_indexed |
|---|---:|---:|---:|
| pointReadByEmail | 1.020ms | 0.423ms (2.41x) | 0.357ms (2.86x) |
| selectiveReadByTenantStatus | 1.492ms | 0.373ms (4.00x) | 0.289ms (5.16x) |
| lowSelectivityReadByStatus | 1.715ms | 1.034ms (1.66x) | 0.781ms (2.20x) |
| selectiveUpdateByTenantStatus | 3.870ms | 3.838ms (1.01x) | 3.645ms (1.06x) |
| createMany | 17.561ms | 20.054ms (0.88x) | 23.638ms (0.74x) |

### EXPLAIN (ANALYZE) Highlights

| Query | baseline node | selective node | over_indexed node |
|---|---|---|---|
| pointReadByEmail | Limit | Limit | Limit |
| selectiveReadByTenantStatus | Aggregate | Aggregate | Aggregate |
| lowSelectivityReadByStatus | Aggregate | Aggregate | Aggregate |

## Dataset: 100,000 rows

| Metric | baseline | selective_indexes | over_indexed |
|---|---:|---:|---:|
| pointReadByEmail | 2.924ms | 0.417ms (7.01x) | 0.374ms (7.82x) |
| selectiveReadByTenantStatus | 5.093ms | 0.567ms (8.98x) | 0.629ms (8.10x) |
| lowSelectivityReadByStatus | 6.043ms | 6.170ms (0.98x) | 6.154ms (0.98x) |
| selectiveUpdateByTenantStatus | 8.341ms | 4.827ms (1.73x) | 6.973ms (1.20x) |
| createMany | 19.482ms | 23.091ms (0.84x) | 23.440ms (0.83x) |

### EXPLAIN (ANALYZE) Highlights

| Query | baseline node | selective node | over_indexed node |
|---|---|---|---|
| pointReadByEmail | Limit | Limit | Limit |
| selectiveReadByTenantStatus | Aggregate | Aggregate | Aggregate |
| lowSelectivityReadByStatus | Aggregate | Aggregate | Aggregate |

## Index Decision Formula

- index should be kept when: `read_gain_ms * read_qps > write_penalty_ms * write_qps`
- use this benchmark's `avgMs` to estimate the gain/penalty side.

