# PostgreSQL Index Benchmark Report

Generated at: 2026-02-14T18:23:34.501Z
Database URL: `postgresql://prisma:prisma@localhost:5432/prisma?connection_limit=1`

## Setup

- dataset sizes: 20000, 100000
- warmups: 3
- measured runs: 15
- create batch size: 1000

## Scenario Definitions

- `baseline`: id(primary key) のみ
- `selective_indexes`: 選択性が高い列だけ index
- `over_indexed`: 低選択性や用途不明の列にも追加

## Dataset: 20,000 rows

| Metric | baseline | selective_indexes | over_indexed |
|---|---:|---:|---:|
| pointReadByEmail | 0.716ms | 0.377ms (1.90x) | 0.415ms (1.73x) |
| selectiveReadByTenantStatus | 1.248ms | 0.329ms (3.79x) | 0.354ms (3.52x) |
| lowSelectivityReadByStatus | 1.436ms | 1.035ms (1.39x) | 0.992ms (1.45x) |
| selectiveUpdateByTenantStatus | 3.662ms | 2.878ms (1.27x) | 3.456ms (1.06x) |
| createMany | 17.263ms | 19.630ms (0.88x) | 21.907ms (0.79x) |

### EXPLAIN (ANALYZE) Highlights

| Query | baseline node | selective node | over_indexed node |
|---|---|---|---|
| pointReadByEmail | Limit | Limit | Limit |
| selectiveReadByTenantStatus | Aggregate | Aggregate | Aggregate |
| lowSelectivityReadByStatus | Aggregate | Aggregate | Aggregate |

## Dataset: 100,000 rows

| Metric | baseline | selective_indexes | over_indexed |
|---|---:|---:|---:|
| pointReadByEmail | 2.929ms | 0.385ms (7.61x) | 0.428ms (6.84x) |
| selectiveReadByTenantStatus | 5.208ms | 0.498ms (10.46x) | 0.537ms (9.70x) |
| lowSelectivityReadByStatus | 6.307ms | 4.149ms (1.52x) | 3.827ms (1.65x) |
| selectiveUpdateByTenantStatus | 7.828ms | 3.493ms (2.24x) | 6.155ms (1.27x) |
| createMany | 17.676ms | 20.851ms (0.85x) | 21.873ms (0.81x) |

### EXPLAIN (ANALYZE) Highlights

| Query | baseline node | selective node | over_indexed node |
|---|---|---|---|
| pointReadByEmail | Limit | Limit | Limit |
| selectiveReadByTenantStatus | Aggregate | Aggregate | Aggregate |
| lowSelectivityReadByStatus | Aggregate | Aggregate | Aggregate |

## Index Decision Formula

- index should be kept when: `read_gain_ms * read_qps > write_penalty_ms * write_qps`
- use this benchmark's `avgMs` to estimate the gain/penalty side.

